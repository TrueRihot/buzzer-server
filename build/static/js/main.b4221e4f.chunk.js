(this.webpackJsonpwerbungraten=this.webpackJsonpwerbungraten||[]).push([[0],{78:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var s=n(2),i=n.n(s),r=n(38),a=n.n(r),c=n(10),o=n(11),l=n(1),u=n(13),d=n(12),h=n(39),j=n(40),b=n(0);function m(t){var e=Object(s.useState)(t.answer.correct),n=Object(j.a)(e,2),i=n[0],r=n[1],a=function(e){var n=void 0;switch(e){case!0:n="answerCorrect";break;default:n="answerFalse"}t.adminToolEmitter(n,{team:t.answer.team,answerIndex:t.answer.questionIndex}),r(e)};return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.answer.team}),Object(b.jsx)("td",{children:t.answer.antwort}),Object(b.jsx)("td",{children:t.answer.tick}),Object(b.jsx)("td",{children:i?"Richtig":"Falsch"}),Object(b.jsxs)("td",{children:[Object(b.jsx)("button",{onClick:function(){return a(!0)},className:"result-button",children:"Richtig"}),Object(b.jsx)("button",{onClick:function(){return a(!1)},className:"result-button",children:"Falsch"})]})]},t.answer.team)}var O=n(41);function p(t){var e=t.data,n=e.map((function(t){return t.points})),s=Math.max.apply(Math,Object(O.a)(n)),i=e.map((function(t){return function(t){var e=t.points/s*100+"%";return Object(b.jsxs)("div",{className:"team-graph",style:{height:e},children:[Object(b.jsx)("div",{className:"overlay-team",children:t.team}),Object(b.jsx)("div",{className:"overlay-points",children:t.points})]})}(t)}));return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"overlay ".concat(t.showOverlay?"active":"hidden"),children:[Object(b.jsx)("button",{className:"quit",onClick:function(){return t.clickhandle()},children:"\u276e"}),Object(b.jsxs)("div",{className:"auswertung",children:[Object(b.jsx)("h2",{children:"Auswertung"}),Object(b.jsx)("div",{className:"graphs",children:i})]})]})})}var x=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).state={showOverlay:!1},s.renderAnswers=s.renderAnswers.bind(Object(l.a)(s)),s.toggleOverlay=s.toggleOverlay.bind(Object(l.a)(s)),s.showAuswertung=s.showAuswertung.bind(Object(l.a)(s)),s}return Object(o.a)(n,[{key:"renderAnswers",value:function(){var t=this.props.answers,e=[],n=this;return t.forEach((function(t){e.push(Object(b.jsx)(m,{answer:t,adminToolEmitter:n.props.adminToolEmitter}))})),e}},{key:"toggleOverlay",value:function(){this.state.showOverlay?this.setState({showOverlay:!1}):this.setState({showOverlay:!0})}},{key:"showAuswertung",value:function(){this.props.adminToolEmitter("showData"),this.toggleOverlay()}},{key:"render",value:function(){var t=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Adminkonsole"}),Object(b.jsxs)("p",{children:["Frage Nummer: ",this.props.fragenIndex+1," ",Object(b.jsx)("strong",{children:this.props.frage})]}),Object(b.jsx)("div",{children:this.props.tick}),Object(b.jsx)("p",{children:this.props.showQuestion?Object(b.jsx)("strong",{children:"Die Frage ist aktuel SICHTBAR"}):Object(b.jsx)("strong",{children:"Die Frage ist aktuell NICHT sichtbar"})}),Object(b.jsxs)("div",{className:"flex flex-spacing flex-wrap control-element",children:[Object(b.jsx)("button",{onClick:function(){return t.props.adminToolEmitter("toggleVisibility")},children:this.props.showQuestion?"Frage verstecken":"Frage zeigen"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){return t.props.adminToolEmitter("startCountdown")},className:this.props.showQuestion?"":"disabled",children:"Countdown Starten"}),Object(b.jsx)("div",{className:"tooltip",children:"Die Frage ist noch nicht Sichtbar!"})]}),Object(b.jsx)("button",{onClick:function(){return t.props.adminToolEmitter("stopCountdown")},children:"Countdown stoppen"}),Object(b.jsx)("button",{onClick:function(){return t.props.adminToolEmitter("resetCountdown")},children:"Stoppt und resettet den Countdown"})]}),Object(b.jsxs)("div",{className:"flex flex-spacing flex-wrap control-element",children:[Object(b.jsx)("button",{onClick:function(){return t.props.adminToolEmitter("prevQuestion")},children:"Vorherige Frage"}),Object(b.jsx)("button",{onClick:function(){return t.props.adminToolEmitter("nextQuestion")},children:"N\xe4chste Frage"})]}),Object(b.jsxs)("div",{className:"flex flex-spacing flex-wrap control-element",children:[Object(b.jsx)("button",{onClick:function(){return t.props.adminToolEmitter("saveData")},children:"Speichern"}),Object(b.jsx)("button",{onClick:function(){return t.showAuswertung()},children:"Auswerten"})]}),Object(b.jsxs)("div",{className:"control-element",children:[Object(b.jsx)("h3",{children:"Antworten"}),Object(b.jsxs)("table",{className:"data-table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Team"}),Object(b.jsx)("th",{children:"Antwort"}),Object(b.jsx)("th",{children:"Tick"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{})]})}),Object(b.jsx)("tbody",{children:this.renderAnswers()})]})]}),Object(b.jsx)(p,{data:this.props.auswertung,clickhandle:this.toggleOverlay,showOverlay:this.state.showOverlay})]})}}]),n}(i.a.Component),w=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onClickHandle=function(t){if(t.preventDefault(),s.setState({error:""}),!s.state.sent&&s.props.tick>0&&s.props.showQuestion){var e=s.textInput.current.value;e&&(s.props.submitHandler({antwort:e}),s.setState({sent:!0}),s.textInput.current.value="")}else s.setState({error:"Du kannst gerade keine Frage absenden!"})},s.state={sent:!1,error:""},s.textInput=i.a.createRef(null),s.onClickHandle=s.onClickHandle.bind(Object(l.a)(s)),s}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(t){this.props.frage!==t.frage&&this.setState({sent:!1,error:""})}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Frage:"}),Object(b.jsxs)("div",{className:"question-tick",children:[this.props.showQuestion?Object(b.jsx)("strong",{children:this.props.frage}):Object(b.jsx)("strong",{}),Object(b.jsx)("div",{className:"tick",children:this.props.tick})]}),Object(b.jsxs)("form",{className:"flex flex-wrap input-button",children:[Object(b.jsx)("input",{type:"text",className:"input",id:"answer",ref:this.textInput}),Object(b.jsx)("button",{type:"submit",className:"send-answer ".concat(0===this.props.tick||!this.props.showQuestion||this.state.sent?"disabled":""),onClick:this.onClickHandle,children:"Absenden!"}),Object(b.jsx)("div",{children:this.state.error})]})]})}}]),n}(i.a.Component),f=(n(78),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).submitHandler=function(t){var e=Object(l.a)(s);t.preventDefault();var n=s.input.current.value;if(n){var i=new XMLHttpRequest;i.open("POST","http://192.168.178.52:8080/newteam/"+n,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(e.setState({teamName:n}),e.setState({error:""}),e.websocketConnect()),4===i.readyState&&409===i.status&&e.throwError(i.responseText)},i.send(n)}},s.throwError=function(t){s.setState({error:t})},s.state={isInitialized:!1,teamName:"",error:"",currentQuestion:{},questionVisible:!1,isAdmin:!1,socket:void 0,timer:30,answers:[],showData:[]},s.input=i.a.createRef(),s.submitHandler=s.submitHandler.bind(Object(l.a)(s)),s.throwError=s.throwError.bind(Object(l.a)(s)),s.joinGame=s.joinGame.bind(Object(l.a)(s)),s.submitSocket=s.submitSocket.bind(Object(l.a)(s)),s.quitHandler=s.quitHandler.bind(Object(l.a)(s)),s.websocketConnect=s.websocketConnect.bind(Object(l.a)(s)),s.adminToolEmitter=s.adminToolEmitter.bind(Object(l.a)(s)),s}return Object(o.a)(n,[{key:"websocketConnect",value:function(){var t=this;t.state.socket?t.state.socket.connected&&(t.state.socket.emit("joinGame",{name:t.state.teamName}),t.setState({isInitialized:!0})):(console.log("connecting to websocket"),t.state.socket=Object(h.io)("http://192.168.178.52:8080"),t.state.socket.on("connect",(function(){console.log("Joining Game"),t.joinGame(),t.setState({isInitialized:!0}),t.state.socket.on("loadQuestion",(function(e){t.setState({currentQuestion:e,questionVisible:e.questionVisible,answers:e.answers})})),t.state.socket.on("tick",(function(e){t.setState({timer:e.tick}),e.tick<10&&navigator.vibrate(200)})),t.state.socket.on("resetTick",(function(){t.setState({timer:30})})),t.state.socket.on("loadAdminUI",(function(){t.setState({isAdmin:!0})})),t.state.socket.on("disconnect",(function(){console.log("Disconnected")})),t.state.socket.on("teamInUse",(function(){t.state.socket.disconnect(),t.setState({isInitialized:!1,teamName:"",error:"Team ist bereits ingame",currentQuestion:{},questionVisible:!1,isAdmin:!1,socket:void 0,answers:[],showData:[]})})),t.state.socket.on("adminNewAnswer",(function(e){t.setState({answers:e.answers}),console.log("setting Answers"+e.answers)})),t.state.socket.on("showAuswertung",(function(e){t.setState({showData:e.auswertung})}))})))}},{key:"joinGame",value:function(){if(this.state.socket)try{this.state.socket.emit("joinGame",{name:this.state.teamName})}catch(t){this.throwError(t)}}},{key:"submitSocket",value:function(t){t.questionIndex=this.state.currentQuestion.index,this.state.socket.emit("submit",t)}},{key:"quitHandler",value:function(){this.state.socket.disconnect(),this.setState({isInitialized:!1,teamName:"",error:"",currentQuestion:{},questionVisible:!1,isAdmin:!1,socket:void 0,answers:[],showData:[]})}},{key:"adminToolEmitter",value:function(t,e){e?this.state.socket.emit(t,e):this.state.socket.emit(t)}},{key:"render",value:function(){var t=this.state,e=t.isInitialized,n=t.teamName,s=t.error,i=t.currentQuestion,r=t.questionVisible;return e?i==={}?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h1",{children:["Hallo ",n,"!"]}),Object(b.jsx)("button",{className:"quit",onClick:this.quitHandler,children:"X"}),i==={}?Object(b.jsx)("p",{children:"Geht sofort los"}):Object(b.jsx)("p",{})]}):this.state.isAdmin?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{className:"quit",onClick:this.quitHandler,children:"X"}),Object(b.jsx)(x,{adminToolEmitter:this.adminToolEmitter,frage:i.question,submitHandler:this.submitSocket,showQuestion:r,message:this.state.message,fragenIndex:i.index,tick:this.state.timer,answers:this.state.answers,auswertung:this.state.showData})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:Object(b.jsxs)("span",{className:"",children:["Team: ",n]})}),Object(b.jsx)("button",{className:"quit",onClick:this.quitHandler,children:"X"}),Object(b.jsx)(w,{frage:i.question,submitHandler:this.submitSocket,showQuestion:r,message:this.state.message,fragenIndex:i.index,tick:this.state.timer})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:"Willkommen bei Werbungraten"}),Object(b.jsxs)("form",{className:"flex flex-wrap input-button",children:[Object(b.jsx)("input",{type:"text",placeholder:"Teamname",ref:this.input}),Object(b.jsx)("div",{children:s||""}),Object(b.jsx)("button",{type:"submit",onClick:this.submitHandler,children:"GO!"})]})]})}}]),n}(i.a.Component));var k=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(f,{})})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(e){var n=e.getCLS,s=e.getFID,i=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),s(t),i(t),r(t),a(t)}))};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root")),g()}},[[79,1,2]]]);
//# sourceMappingURL=main.b4221e4f.chunk.js.map